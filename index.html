<!DOCTYPE html>
<html>
<head>
  <title>MQTT Login</title>
</head>
<body>
  <h2>Login to MQTT Broker</h2>

  <input type="text" id="username" placeholder="MQTT Username" /><br /><br />
  <input type="password" id="password" placeholder="MQTT Password" /><br /><br />
  <button onclick="handleLogin()">Login</button>

  <script>
    function handleLogin() {
      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value;

      if (!username || !password) {
        alert("Please enter both username and password");
        return;
      }

      // Save login data for use in other pages
      sessionStorage.setItem("mqttUsername", username);
      sessionStorage.setItem("mqttPassword", password);

      // Decide the role based on the username prefix
      if (username.startsWith("admin")) {
        window.location.href = "client.html";
      } else if (username.startsWith("esp32")) {
        window.location.href = "device.html";
      } else {
        alert("Unknown user type. Username should start with 'admin' or 'esp32'.");
      }
    }
  </script>
</body>
</html>
